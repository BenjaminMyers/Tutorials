'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

require('instapromise');

var _Env = require('./Env');

var Env = _interopRequireWildcard(_Env);

var _jsonFile = require('@exponent/json-file');

var _jsonFile2 = _interopRequireDefault(_jsonFile);

var _mkdirp = require('mkdirp');

var _mkdirp2 = _interopRequireDefault(_mkdirp);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SETTINGS_FILE_NAME = 'exponent.json';

function userSettingsFile() {
  return _path2.default.join(dotExponentHomeDirectory(), SETTINGS_FILE_NAME);
}

function userSettingsJsonFile() {
  return new _jsonFile2.default(userSettingsFile(), { cantReadFileDefault: {} });
}

function recentExpsJsonFile() {
  return new _jsonFile2.default(_path2.default.join(dotExponentHomeDirectory(), 'xde-recent-exps.json'));
}

var mkdirped = false;
function dotExponentHomeDirectory() {
  var home = Env.home();
  if (!home) {
    throw new Error("Can't determine your home directory; make sure your $HOME environment variable is set.");
  }
  var dirPath = _path2.default.join(home, '.exponent');
  if (!mkdirped) {
    _mkdirp2.default.sync(dirPath);
    mkdirped = true;
  }
  return dirPath;
}

var UserSettings = userSettingsJsonFile();

(0, _assign2.default)(UserSettings, {
  dotExponentHomeDirectory: dotExponentHomeDirectory,
  recentExpsJsonFile: recentExpsJsonFile,
  userSettingsFile: userSettingsFile,
  userSettingsJsonFile: userSettingsJsonFile,
  SETTINGS_FILE_NAME: SETTINGS_FILE_NAME
});

exports.default = UserSettings;
//# sourceMappingURL=__sourcemaps__/UserSettings.js.map
