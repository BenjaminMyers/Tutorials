{"version":3,"sources":["ui/toolbar/ToolBar.js"],"names":["ToolBar","Component","constructor","props","context","_onKeyDown","event","metaKey","ctrlKey","process","platform","setState","shiftSelected","shiftKey","key","toLowerCase","preventDefault","onNewProjectClick","onOpenProjectClick","isProjectOpen","onRestartClick","isProjectRunning","isPlatformSupported","_simulatorIOSAsync","_simulatorAndroidAsync","_onKeyUp","_getTogglePopoverFn","popover","stopPropagation","onTogglePopover","_onSendLinkClick","_sendLinkInput","value","SEND_LINK","onSendLinkClick","_onMenuClick","_onLogOutClick","onLogOut","error","console","_restartClicked","state","_onShowInFinderClick","logEvent","openFolderAsync","projectRoot","catch","err","_onOpenInTerminalClick","openConsoleAsync","_onOpenInEditorClick","openProjectInEditorAsync","projectUrl","_simulatorProjectUrlAsync","openUrlInSimulatorSafeAsync","openProjectAsync","constructManifestUrlAsync","hostType","dev","projectSettings","minify","componentDidMount","document","body","addEventListener","componentWillUnmount","removeEventListener","_renderPopoverProject","openPopover","PROJECT","onCloseProjectClick","_renderOpenLinks","openFolderName","openConsoleName","_renderPopoverHelp","HELP","onDocsClicked","onJoinUsOnSlackClicked","onChatWithUsOnIntercomClicked","onSendDiagnosticsReportClicked","onClearXDECacheClicked","_renderPopoverSendLink","styles","sendLinkInput","r","sendTo","sendLinkSubmit","_renderPopoverSimulator","DEVICE","_renderUserName","popoverBodyEl","userNameEl","userName","USER","userNameWithPopoverEl","render","iconUrl","projectJson","icon","projectName","name","row","leftCol","rightCol","separator","rightSpaced","onPublishClick","propTypes","bool","oneOf","map","k","func","isRequired","object","string","onAppendErrors","onAppendLogs","create","borderTop","colorBorder","marginTop","gutterLg","marginBottom","display","alignItems","justifyContent","flex","textAlign","marginRight","color","colorText","fontSize","fontSizeLg","marginLeft","gutterMd","verticalAlign","colorSubtitle","cursor","fontSizeMd","textDecoration","border","padding","gutterSm","paddingTop","paddingRight","paddingLeft","backgroundColor","colorBackground"],"mappings":"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","file":"ui/toolbar/ToolBar.js","sourcesContent":["import { StyleSheet, css } from 'aphrodite';\nimport React, {PropTypes} from 'react';\nimport {\n  Analytics,\n  Android,\n  FileSystem,\n  Simulator,\n  UrlUtils,\n} from 'xdl';\n\nimport {PopoverEnum} from '../Constants';\nimport ProjectIcon from '../ProjectIcon';\nimport StyleConstants from '../StyleConstants';\n\nimport IconButton from './IconButton';\nimport MenuItem from './MenuItem';\nimport MenuSeparator from './MenuSeparator';\nimport Popover from './Popover';\n\nexport default class ToolBar extends React.Component {\n  static propTypes = {\n    isProjectOpen: PropTypes.bool,\n    isProjectRunning: PropTypes.bool,\n    openPopover: PropTypes.oneOf(Object.keys(PopoverEnum).map((k) => PopoverEnum[k])),\n    onTogglePopover: PropTypes.func.isRequired,\n    projectJson: PropTypes.object,\n    projectRoot: PropTypes.string,\n    projectSettings: PropTypes.object,\n    sendTo: PropTypes.string,\n    userName: PropTypes.string,\n\n    onAppendErrors: PropTypes.func,\n    onAppendLogs: PropTypes.func,\n    onLogOut: PropTypes.func,\n    onNewProjectClick: PropTypes.func,\n    onOpenProjectClick: PropTypes.func,\n    onCloseProjectClick: PropTypes.func,\n    onPublishClick: PropTypes.func,\n    onRestartClick: PropTypes.func,\n    onSendLinkClick: PropTypes.func,\n    onDocsClicked: PropTypes.func,\n    onJoinUsOnSlackClicked: PropTypes.func,\n    onChatWithUsOnIntercomClicked: PropTypes.func,\n    onSendDiagnosticsReportClicked: PropTypes.func,\n    onClearXDECacheClicked: PropTypes.func,\n  };\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      shiftSelected: false,\n    };\n  }\n\n  componentDidMount() {\n    document.body.addEventListener('keydown', this._onKeyDown);\n    document.body.addEventListener('keyup', this._onKeyUp);\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this._onKeyDown);\n    document.body.removeEventListener('keyup', this._onKeyUp);\n  }\n\n  _onKeyDown = (event) => {\n    let metaKey = event.ctrlKey;\n    if (process.platform === 'darwin') {\n      metaKey = event.metaKey;\n    }\n\n    this.setState({\n      shiftSelected: !!event.shiftKey,\n    });\n\n    if (metaKey) {\n      switch (event.key.toLowerCase()) {\n        case 'n':\n          event.preventDefault();\n          this.props.onNewProjectClick();\n          break;\n        case 'o':\n          event.preventDefault();\n          this.props.onOpenProjectClick();\n          break;\n        case 'p':\n          event.preventDefault();\n          if (this.props.isProjectOpen) {\n            this.props.onRestartClick(!!event.shiftKey);\n          }\n          break;\n        case 'i':\n          event.preventDefault();\n          if (this.props.isProjectRunning && Simulator.isPlatformSupported()) {\n            this._simulatorIOSAsync();\n          }\n          break;\n        case 'd':\n          event.preventDefault();\n          if (this.props.isProjectRunning && Android.isPlatformSupported()) {\n            this._simulatorAndroidAsync();\n          }\n          break;\n      }\n    }\n  };\n\n  _onKeyUp = (event) => {\n    this.setState({\n      shiftSelected: !!event.shiftKey,\n    });\n  }\n\n  _getTogglePopoverFn = (popover) => {\n    return (event) => {\n      event.stopPropagation();\n      this.props.onTogglePopover(popover);\n    };\n  }\n\n  _renderPopoverProject() {\n    if (this.props.openPopover !== PopoverEnum.PROJECT) {\n      return null;\n    }\n    return (\n      <div>\n        <MenuItem\n          label=\"New Project\"\n          shortcut=\"N\"\n          onClick={this.props.onNewProjectClick}\n        />\n        <MenuItem\n          label=\"Open Project\"\n          shortcut=\"O\"\n          onClick={this.props.onOpenProjectClick}\n        />\n        <MenuItem\n          label=\"Close Project\"\n          isDisabled={!this.props.isProjectOpen}\n          onClick={this.props.onCloseProjectClick}\n        />\n        {this._renderOpenLinks()}\n      </div>\n    );\n  }\n\n  _renderOpenLinks() {\n    if (process.platform === 'darwin' || process.platform === 'win32') {\n      return (\n        <div>\n          <MenuSeparator />\n          <MenuItem\n            label={FileSystem.openFolderName()}\n            isDisabled={!this.props.isProjectOpen}\n            onClick={this._onShowInFinderClick}\n          />\n          <MenuItem\n            label={FileSystem.openConsoleName()}\n            isDisabled={!this.props.isProjectOpen}\n            onClick={this._onOpenInTerminalClick}\n          />\n          {process.platform === 'darwin' ?\n            <MenuItem\n              label=\"Open in Editor\"\n              isDisabled={!this.props.isProjectOpen}\n              onClick={this._onOpenInEditorClick}\n            /> : null}\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  _renderPopoverHelp() {\n    if (this.props.openPopover !== PopoverEnum.HELP) {\n      return null;\n    }\n    return (\n      <div>\n        <MenuItem\n          label=\"Exponent Docs\"\n          onClick={this.props.onDocsClicked}\n        />\n        <MenuItem\n          label=\"Join Us On Slack\"\n          onClick={this.props.onJoinUsOnSlackClicked}\n        />\n        <MenuItem\n          label=\"Chat with Us On Intercom\"\n          onClick={this.props.onChatWithUsOnIntercomClicked}\n        />\n        <MenuItem\n          label=\"Send Diagnostics Report\"\n          onClick={this.props.onSendDiagnosticsReportClicked}\n        />\n        <MenuItem\n          label=\"Clear XDE Cache\"\n          onClick={this.props.onClearXDECacheClicked}\n        />\n      </div>\n    );\n  }\n\n  _onSendLinkClick = (event) => {\n    if (this._sendLinkInput.value) {\n      this._getTogglePopoverFn(PopoverEnum.SEND_LINK)(event);\n      this.props.onSendLinkClick(this._sendLinkInput.value);\n    }\n  };\n\n  _onMenuClick = (event) => {\n    event.stopPropagation();\n  };\n\n  _renderPopoverSendLink() {\n    if (this.props.openPopover !== PopoverEnum.SEND_LINK) {\n      return null;\n    }\n    return (\n      <div onClick={this._onMenuClick}>\n        <input\n          className={css(styles.sendLinkInput)}\n          ref={(r) => { this._sendLinkInput = r; }}\n          defaultValue={this.props.sendTo}\n          placeholder=\"Email or phone\"\n        />\n        <a\n          onClick={this._onSendLinkClick}\n          className={css(styles.sendLinkSubmit)}>Send Link</a>\n      </div>\n    );\n  }\n\n  _renderPopoverSimulator() {\n    if (this.props.openPopover !== PopoverEnum.DEVICE) {\n      return null;\n    }\n    return (\n      <div>\n        {Simulator.isPlatformSupported() && (\n          <MenuItem\n            label=\"Open on iOS Simulator\"\n            shortcut=\"I\"\n            onClick={this._simulatorIOSAsync}\n          />\n        )}\n        {Android.isPlatformSupported() && (\n          <MenuItem\n            label=\"Open on Android\"\n            shortcut=\"D\"\n            onClick={this._simulatorAndroidAsync}\n          />\n        )}\n      </div>\n    );\n  }\n\n  _onLogOutClick = async () => {\n    try {\n      this.props.onLogOut();\n    } catch (error) {\n      console.error(\"logout error:\", error);\n    }\n  };\n\n  _renderUserName() {\n    const popoverBodyEl = (\n      <div>\n        <MenuItem label=\"Log out\" onClick={this._onLogOutClick} />\n      </div>\n    );\n    const userNameEl = (\n      <a\n        className={css(styles.userName)}\n        onClick={this._getTogglePopoverFn(PopoverEnum.USER)}>\n        {this.props.userName}\n      </a>\n    );\n    const userNameWithPopoverEl = (\n      <Popover arrowOffset={10} isToLeft body={popoverBodyEl}>\n        {userNameEl}\n      </Popover>\n    );\n\n    return this.props.openPopover === PopoverEnum.USER ?\n      userNameWithPopoverEl : userNameEl;\n  }\n\n  render() {\n    const iconUrl = this.props.projectJson && this.props.projectJson.icon;\n    const projectName =\n      (this.props.projectJson && this.props.projectJson.name) ||\n      this.props.projectRoot;\n\n    return (\n      <div>\n        <div className={css(styles.row)}>\n          <div className={css(styles.leftCol)}>\n            <ProjectIcon iconUrl={iconUrl} />\n            <div className={css(styles.projectName)}>{projectName}</div>\n          </div>\n          <div className={css(styles.rightCol)}>\n            {this._renderUserName()}\n          </div>\n        </div>\n        <div className={css(styles.separator)} />\n        <div className={css(styles.row)}>\n          <div className={css(styles.leftCol)}>\n            <IconButton\n              iconUrl=\"./IconBolt.png\"\n              label=\"Project\"\n              color=\"#8309e0\"\n              onClick={this._getTogglePopoverFn(PopoverEnum.PROJECT)}\n              popover={this._renderPopoverProject()}\n              styles={styles.rightSpaced}\n            />\n            <IconButton\n              iconUrl=\"./IconRestart.png\"\n              label=\"Restart\"\n              color=\"#328CE9\"\n              isDisabled={!this.props.isProjectOpen}\n              onClick={this._restartClicked}\n              styles={styles.rightSpaced}\n            />\n            <IconButton\n              iconUrl=\"./IconHelp.png\"\n              label=\"Help\"\n              color=\"#383D40\"\n              onClick={this._getTogglePopoverFn(PopoverEnum.HELP)}\n              popover={this._renderPopoverHelp()}\n              styles={styles.rightSpaced}\n            />\n          </div>\n          <div className={css(styles.rightCol)}>\n            <IconButton\n              iconUrl=\"./IconArrowUp.png\"\n              label=\"Publish\"\n              color=\"#18B405\"\n              isDisabled={!this.props.isProjectRunning}\n              onClick={this.props.onPublishClick}\n              styles={styles.rightSpaced}\n            />\n            <IconButton\n              iconUrl=\"./IconArrowRight.png\"\n              label=\"Send Link\"\n              color=\"#383D40\"\n              isDisabled={!this.props.isProjectRunning}\n              onClick={this._getTogglePopoverFn(PopoverEnum.SEND_LINK)}\n              popover={this._renderPopoverSendLink()}\n              isPopoverToLeft\n              styles={styles.rightSpaced}\n            />\n            <IconButton\n              iconUrl=\"./IconPhone.png\"\n              label=\"Device\"\n              color=\"#383D40\"\n              isDisabled={!this.props.isProjectRunning}\n              onClick={this._getTogglePopoverFn(PopoverEnum.DEVICE)}\n              popover={this._renderPopoverSimulator()}\n              isPopoverToLeft\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  _restartClicked = () => {\n    this.props.onRestartClick(this.state.shiftSelected);\n  }\n\n  // File system methods\n\n  _onShowInFinderClick = () => {\n    Analytics.logEvent('Click Show in Finder');\n\n    FileSystem.openFolderAsync(this.props.projectRoot).catch((err) => {\n      console.error(err);\n    });\n  };\n\n  _onOpenInTerminalClick = () => {\n    Analytics.logEvent('Click Open in Terminal');\n\n    FileSystem.openConsoleAsync(this.props.projectRoot).catch((err) => {\n      console.error(err);\n    });\n  };\n\n  _onOpenInEditorClick = () => {\n    Analytics.logEvent('Click Open in Editor');\n\n    FileSystem.openProjectInEditorAsync(this.props.projectRoot).catch((err) => {\n      console.error(err);\n    });\n  };\n\n  // Simulator methods\n\n  _simulatorIOSAsync = async () => {\n    let projectUrl = await this._simulatorProjectUrlAsync();\n    return await Simulator.openUrlInSimulatorSafeAsync(projectUrl);\n  };\n\n  _simulatorAndroidAsync = async () => {\n    return await Android.openProjectAsync(this.props.projectRoot);\n  };\n\n  _simulatorProjectUrlAsync = async () => {\n    return UrlUtils.constructManifestUrlAsync(this.props.projectRoot, {\n      hostType: 'localhost',\n      dev: this.props.projectSettings.dev,\n      minify: this.props.projectSettings.minify,\n    });\n  };\n}\n\nconst styles = StyleSheet.create({\n  separator: {\n    borderTop: `1px solid ${StyleConstants.colorBorder}`,\n    marginTop: StyleConstants.gutterLg,\n    marginBottom: StyleConstants.gutterLg,\n  },\n  row: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  leftCol: {\n    flex: 1,\n  },\n  rightCol: {\n    flex: 1,\n    textAlign: 'right',\n  },\n  rightSpaced: {\n    marginRight: StyleConstants.gutterLg,\n  },\n  projectName: {\n    color: StyleConstants.colorText,\n    display: 'inline-block',\n    fontSize: StyleConstants.fontSizeLg,\n    marginLeft: StyleConstants.gutterMd,\n    verticalAlign: 'middle',\n  },\n  userName: {\n    color: StyleConstants.colorSubtitle,\n    cursor: 'pointer',\n    fontSize: StyleConstants.fontSizeMd,\n    textDecoration: 'none',\n  },\n  sendLinkInput: {\n    border: 'none',\n    color: StyleConstants.colorSubtitle,\n    display: 'block',\n    fontSize: StyleConstants.fontSizeMd,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    marginBottom: StyleConstants.gutterMd,\n    padding: StyleConstants.gutterSm,\n    textAlign: 'center',\n  },\n  sendLinkSubmit: {\n    cursor: 'pointer',\n    display: 'block',\n    borderTop: `1px solid ${StyleConstants.colorBorder}`,\n    paddingTop: StyleConstants.gutterMd,\n    paddingRight: StyleConstants.gutterMd,\n    paddingLeft: StyleConstants.gutterMd,\n    textAlign: 'center',\n    textDecoration: 'none',\n\n    backgroundColor: 'white',\n    color: '#328CE9',\n    ':active': {\n      backgroundColor: StyleConstants.colorBackground,\n      color: '#08509A',\n    },\n  },\n});\n"],"sourceRoot":"/source/"}